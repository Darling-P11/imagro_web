<header class="header" [ngClass]="{ 'sidebar-collapsed': isSidebarCollapsed }">
  <div class="header__container">
    <button
      type="button"
      (click)="toggleSidebar()"
      class="header__toggle"
      title="Alternar barra lateral"
    >
      <i class="ri-menu-line"></i>
    </button>

    <a href="/dashboard" class="header__logo">
      <img
        src="assets/images/logo_banner_verde.png"
        alt="Imagro Logo"
        class="imagro-logo"
      />
    </a>
  </div>
</header>

<!-- Sidebar -->
<nav
  class="sidebar"
  [ngClass]="{ 'show-sidebar': isSidebarCollapsed }"
  id="sidebar"
>
  <div class="sidebar__container">
    <div class="sidebar__user">
      <div class="sidebar__img">
        <img [src]="userPhoto" alt="image" />
      </div>

      <div class="sidebar__info">
        <h3 class="user-name">{{ userName }}</h3>
        <span class="user-email">{{ userEmail }}</span>
        <small class="user-role">Rol: {{ userRole | titlecase }}</small>
      </div>
    </div>

    <div class="sidebar__content">
      <!-- üîì M√ìDULOS PARA USUARIO NORMAL Y ADMINISTRADOR DE CULTIVO -->
      <div *ngIf="isUsuario() || isAdminCultivo()">
        <h3 class="sidebar__title">MANAGE</h3>
        <div class="sidebar__list">
          <a routerLink="/dashboard" class="sidebar__link active-link">
            <i class="ri-pie-chart-2-fill"></i>
            <span *ngIf="!isSidebarCollapsed">Inicio</span>
          </a>
          <a routerLink="/datasets" class="sidebar__link">
            <i class="ri-image-fill"></i>
            <span *ngIf="!isSidebarCollapsed">Datasets</span>
          </a>
          <a routerLink="/generate-models" class="sidebar__link">
            <i class="ri-bar-chart-box-fill"></i>
            <span *ngIf="!isSidebarCollapsed">Generar Modelos</span>
          </a>
          <a routerLink="/profile" class="sidebar__link">
            <i class="ri-user-3-fill"></i>
            <span *ngIf="!isSidebarCollapsed">Perfil</span>
          </a>
          <a routerLink="/contributions" class="sidebar__link">
            <i class="ri-file-list-fill"></i>
            <span *ngIf="!isSidebarCollapsed">Contribuciones</span>
          </a>
        </div>
      </div>

      <!-- üîê M√ìDULOS EXCLUSIVOS PARA ADMINISTRADOR DE CULTIVO -->
      <div *ngIf="isAdminCultivo()">
        <h3 class="sidebar__title">ADMIN TOOLS</h3>
        <div class="sidebar__list">
          <a *ngIf="userRole === 'administrador_cultivo'" routerLink="/contributions" class="sidebar__link">
            <i class="ri-database-2-fill"></i>
            <span *ngIf="!isSidebarCollapsed">Revisi√≥n de Contribuciones</span>
          </a>
          <a routerLink="/notifications" class="sidebar__link">
            <i class="ri-notification-3-fill"></i>
            <span *ngIf="!isSidebarCollapsed">Notificaciones</span>
          </a>
          <a routerLink="/tag-management" class="sidebar__link">
            <i class="ri-price-tag-3-fill"></i>
            <span *ngIf="!isSidebarCollapsed">Gesti√≥n de Etiquetas</span>
          </a>
        </div>
      </div>
    </div>

    <!-- üîí ACCIONES GENERALES -->
    <div class="sidebar__actions">
      <button (click)="showAbout()" class="sidebar__link">
        <i class="ri-information-fill"></i>
        <span>Acerca de</span>
      </button>
      <button class="sidebar__link" (click)="logout()">
        <i class="ri-logout-box-r-fill"></i>
        <span *ngIf="!isSidebarCollapsed">Cerrar Sesi√≥n</span>
      </button>
    </div>
  </div>
</nav>

<!-- Main Content -->
<!-- Main Content -->
<main class="dashboard-container main container" [ngClass]="{ 'left-pd': isSidebarCollapsed }" id="main">
  <!-- Aqu√≠ se renderizan las p√°ginas hijas -->
  <router-outlet></router-outlet>
</main>

